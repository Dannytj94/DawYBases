#!/usr/bin/ksh
####################################################
##                   Lab 10                       ##
##             Operating Systems                  ##
####################################################
#Objective: Develop a script that receives two arguments
# and displyas on the screen the date on whicht the given
# fole was last modified.

##All the accounts must be in the same groups

#validate 2 arguments

if test $# -eq 2
then

  Ligne=`egrep -i $2 /etc/passwd`
        if test $? -eq 0
        then

          linea=`expr /export/home/alumnos/$2`
          if test -r $? -eq 1
          then
            echo "\n You do not have permissions to read the directory"
          else
				aux=`expr egrep -i $2 /etc/passwd | cut -f5 -d:`
				
				x=`expr egrep -i $1 linea` 
				if test $? -eq  0
				then 
				
					line=`expr /export/home/alumnos/$2 | ls -la | tr -s '[ ]' '[#*]' | cut -f6,7 -d# | tr -s '[#]' '[ *]'`
				
				
					echo "\n The file $1 was last updated on $line by $aux"
				
				
				else 
				
					echo "\n The file $1 has not been created by $aux "
				fi
				
				
				


          fi


        else
          echo "\n Error: the UNIX account does not exist in the system!!!"
        fi

else

  echo "\n The script must receive 2 arguments"
  
fi

        